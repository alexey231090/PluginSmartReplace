# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò: Smart Replace Plugin

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞–≥–∏–Ω–æ–º Smart Replace –≤ Godot. –≠—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —á–µ—Ä–µ–∑ JSON-–∫–æ–º–∞–Ω–¥—ã. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ JSON-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

## üìù –ö–∞–∫ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

- **–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç** (–¥–æ–±–∞–≤–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å, –∑–∞–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏/–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–¥–∏—Ä–µ–∫—Ç–∏–≤—ã) ‚Äî –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Å—Å–∏–≤ JSON-–æ–±—ä–µ–∫—Ç–æ–≤.
- **–ü–µ—Ä–µ–¥ JSON –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±—ä—è—Å–Ω–∏ —Å–ª–æ–≤–∞–º–∏, —á—Ç–æ –∏ –∑–∞—á–µ–º —Ç—ã —Å–æ–±–∏—Ä–∞–µ—à—å—Å—è –∏–∑–º–µ–Ω–∏—Ç—å.**
- **–ü–µ—Ä–µ–¥ —Å–∞–º–∏–º JSON —É–∫–∞–∂–∏, –≤ –∫–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç (—Ñ–∞–π–ª) –±—É–¥—É—Ç –≤–Ω–æ—Å–∏—Ç—å—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è.**
- **JSON-–∫–æ–¥ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–º–µ—â–∞–π –≤ –∫–æ–Ω—Ü–µ –æ—Ç–≤–µ—Ç–∞, –ø–æ—Å–ª–µ –≤—Å–µ—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π.**

---

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. `add_function` ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `name`, `parameters`, `comment`, `code`.
- –ü—Ä–∏–º–µ—Ä:
```json
{
  "action": "add_function",
  "name": "move_player",
  "parameters": "direction, speed",
  "comment": "–î–≤–∏–≥–∞–µ—Ç –∏–≥—Ä–æ–∫–∞ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏",
  "code": "position += direction * speed\nprint(\"Player moved!\")"
}
```

### 2. `replace_function` ‚Äî –ó–∞–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ `name` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ –ø–æ `signature` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–±).
- –ú–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–µ–Ω—è—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É —á–µ—Ä–µ–∑ `new_signature`.
- –ü—Ä–∏–º–µ—Ä:
```json
{
  "action": "replace_function",
  "name": "foo",
  "new_signature": "func foo(a, b, c, d, e):",
  "code": "print(a, b, c, d, e)",
  "comment": "–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è foo –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤"
}
```

### 3. `delete_function` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ `name` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ –ø–æ `signature` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–±).
- –ü—Ä–∏–º–µ—Ä:
```json
{
  "action": "delete_function",
  "name": "foo"
}
```

### 4. `add_code` ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ–Ω—Å—Ç–∞–Ω—Ç, –¥–∏—Ä–µ–∫—Ç–∏–≤, –∏–º–ø–æ—Ä—Ç–æ–≤.
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π `position_type`:
  - `"start"` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–∏–≤ –∏ –∏–º–ø–æ—Ä—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@tool`, `class_name`, `extends`).
  - `"after_extends"` ‚Äî –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ–Ω—Å—Ç–∞–Ω—Ç, —Å–∏–≥–Ω–∞–ª–æ–≤, —Ñ—É–Ω–∫—Ü–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∫–æ–¥–∞ –∫–ª–∞—Å—Å–∞).
  - `"before_extends"` ‚Äî –¥–ª—è –¥–∏—Ä–µ–∫—Ç–∏–≤, –µ—Å–ª–∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–¥ `extends`.
  - `"specific_line"` ‚Äî –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É (–Ω—É–∂–µ–Ω `line_number`).
- –ü—Ä–∏–º–µ—Ä:
```json
{
  "action": "add_code",
  "code": "var player_health = 100\nvar player_speed = 5.0",
  "position_type": "after_extends"
}
```

### 5. `delete_code` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–π
- –£–¥–∞–ª—è–µ—Ç —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–æ–¥–∞ (–æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫).
- –ü—Ä–∏–º–µ—Ä:
```json
{
  "action": "delete_code",
  "code": "var old_variable = 10"
}
```

---

## ‚ö°Ô∏è –ü—Ä–∏–º–µ—Ä –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –ò–ò

**1. –°–Ω–∞—á–∞–ª–∞ –æ–±—ä—è—Å–Ω–∏ —Å–ª–æ–≤–∞–º–∏, —á—Ç–æ –∏ –∑–∞—á–µ–º —Ç—ã –º–µ–Ω—è–µ—à—å:**

> –í —Å–∫—Ä–∏–ø—Ç–µ `player.gd` –Ω—É–∂–Ω–æ:
> - –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
> - –ó–∞–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞ –Ω–æ–≤—É—é —Å –ø—è—Ç—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
> - –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à—É—é —Ñ—É–Ω–∫—Ü–∏—é

**2. –ó–∞—Ç–µ–º –Ω–∞–ø–∏—à–∏, –≤ –∫–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç –±—É–¥—É—Ç –≤–Ω–æ—Å–∏—Ç—å—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

> –ò–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –≤–Ω–µ—Å–µ–Ω—ã –≤ —Ñ–∞–π–ª: player.gd

**3. –í –∫–æ–Ω—Ü–µ ‚Äî –º–∞—Å—Å–∏–≤ JSON-–∫–æ–º–∞–Ω–¥:**

```json
[
  {
    "action": "add_code",
    "code": "var player_health = 100\nvar player_speed = 5.0",
    "position_type": "after_extends"
  },
  {
    "action": "replace_function",
    "name": "move_player",
    "new_signature": "func move_player(a, b, c, d, e):",
    "code": "print(a, b, c, d, e)",
    "comment": "–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤"
  },
  {
    "action": "delete_function",
    "name": "old_func"
  }
]
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —á–∞—Ç-–±–æ—Ç–∞

- –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Å—Å–∏–≤ JSON-–∫–æ–º–∞–Ω–¥.
- –ü–µ—Ä–µ–¥ JSON –æ–±—ä—è—Å–Ω—è–π —Å–ª–æ–≤–∞–º–∏, —á—Ç–æ –∏ –∑–∞—á–µ–º –º–µ–Ω—è–µ—à—å.
- –ü–µ—Ä–µ–¥ JSON —É–∫–∞–∑—ã–≤–∞–π –ø—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É.
- –î–ª—è –ø–æ–∏—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `name` (–∞ –Ω–µ signature).
- –î–ª—è –∑–∞–º–µ–Ω—ã —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π –ø–æ–ª–µ `new_signature`.
- –î–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `position_type: after_extends`.
- –ù–µ –≤—Å—Ç–∞–≤–ª—è–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ (`start`) ‚Äî —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É –≤ Godot!
- –î–ª—è –¥–∏—Ä–µ–∫—Ç–∏–≤ (`@tool`, `class_name`, –∏–º–ø–æ—Ä—Ç–æ–≤) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ `start` –∏–ª–∏ `before_extends`.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ (`signature`), –Ω–æ —ç—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ (`name`) –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Å—Ç–æ—Ç—ã.
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º JSON!

### –ü—Ä–∏–º–µ—Ä –ø–æ–∏—Å–∫–∞ –∏ –∑–∞–º–µ–Ω—ã –ø–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```json
{
  "action": "replace_function",
  "signature": "func foo(a, b):",
  "code": "print(a, b)"
}
```

> ‚ö†Ô∏è –õ—É—á—à–µ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ `name` –∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–µ–Ω—è—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É —á–µ—Ä–µ–∑ `new_signature`! 